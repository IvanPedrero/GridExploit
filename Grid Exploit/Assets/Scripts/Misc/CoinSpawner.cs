using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class CoinSpawner : MonoBehaviour
{
    public List<Transform> coinSpawnPosition;

    public GameObject coinPrefab;

    public float minTimeToSpawn = 3f;
    public float maxTimeToSpawn = 6f;
    private float counter = 0;

    float rand;

    private GameController gameController;

    // Start is called before the first frame update
    void Start()
    {
        gameController = FindObjectOfType<GameController>();

        rand = Random.Range(minTimeToSpawn, maxTimeToSpawn);
        //print("Spawning coin in " + rand);
    }

    // Update is called once per frame
    void Update()
    {
        if (!gameController.gameEnded)
        {
            CountToSpawn();
        }
    }

    void CountToSpawn()
    {
        counter += Time.deltaTime;

        if (counter >= rand)
        {
            //print("Spawning coin in " + rand);
            Spawn();
            counter = 0;
            rand = Random.Range(minTimeToSpawn, maxTimeToSpawn);
        }
    }

    void Spawn()
    {
        Instantiate(coinPrefab,
                    coinSpawnPosition[Random.Range(0, coinSpawnPosition.Count)]);
    }
}
